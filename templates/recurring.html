<!DOCTYPE html>
<html>
<head>
  <title>Recurring Tasks</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<header>
  <h1>Recurring Tasks</h1>
  <a href="/" class="button">‚Üê Back</a>
</header>

<main>

 <form method="post" class="form-card">

    <label>
      Title
      <input type="text" name="title" required>
    </label>

    <label>
      Description
      <textarea name="description"></textarea>
    </label>

    <label>
      Assignee
      <select name="assignee">
        {% for a in assignees %}
          <option value="{{ a[0] }}">{{ a[0] }}</option>
        {% endfor %}
      </select>
    </label>

    <label>
      Frequency
      <select name="frequency" id="frequency" onchange="updateRecurringFields()">
        <option value="weekly">Weekly</option>
        <option value="monthly">Monthly</option>
        <option value="annual">Annual</option>
      </select>
    </label>

    <!-- Weekly -->
    <label id="weekly-field">
      Day of week
      <select name="weekday">
        <option value="0">Monday</option>
        <option value="1">Tuesday</option>
        <option value="2">Wednesday</option>
        <option value="3">Thursday</option>
        <option value="4">Friday</option>
        <option value="5">Saturday</option>
        <option value="6">Sunday</option>
      </select>
    </label>

    <!-- Monthly -->
    <label id="monthly-field" style="display:none;">
      Day of month
      <input type="number" name="day_of_month" min="1" max="31">
    </label>

    <!-- Annual -->
    <div id="annual-field" style="display:none;">
      <label>
        Month
        <select name="month">
          {% for m in range(1,13) %}
            <option value="{{ m }}">{{ m }}</option>
          {% endfor %}
        </select>
      </label>

      <label>
        Day
        <input type="number" name="day" min="1" max="31">
      </label>
    </div>

    <div class="form-actions">
      <button type="submit" class="button primary">
        Create Recurring Task
      </button>
      <a href="/" class="button">Cancel</a>
    </div>

  </form>

</main>

</body>
</html>

<script>
function updateRecurringFields() {
  const freq = document.getElementById("frequency").value;

  document.getElementById("weekly-field").style.display =
    freq === "weekly" ? "block" : "none";

  document.getElementById("monthly-field").style.display =
    freq === "monthly" ? "block" : "none";

  document.getElementById("annual-field").style.display =
    freq === "annual" ? "block" : "none";
}

updateRecurringFields();
</script>